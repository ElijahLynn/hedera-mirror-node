apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: testkube
  namespace: testkube
spec:
  chart:
    spec:
      chart: testkube
      sourceRef:
        kind: HelmRepository
        name: testkube
      version: 1.11.174
  install:
    crds: CreateReplace
  interval: 90s
  upgrade:
    cleanupOnFail: true
    crds: CreateReplace
  values:
    testkube-api:
      cliIngress:
        enabled: false
      extraEnvVars:
        - name: DEBUG
          value: "true"
      templates:
        job: YXBpVmVyc2lvbjogYmF0Y2gvdjEKa2luZDogSm9iCm1ldGFkYXRhOgogIG5hbWU6ICJ7eyAuTmFtZSB9fSIKICBuYW1lc3BhY2U6IHt7IC5OYW1lc3BhY2UgfX0Kc3BlYzoKICB7ey0gaWYgZ3QgLkFjdGl2ZURlYWRsaW5lU2Vjb25kcyAwIH19CiAgYWN0aXZlRGVhZGxpbmVTZWNvbmRzOiB7eyAuQWN0aXZlRGVhZGxpbmVTZWNvbmRzIH19CiAge3stIGVuZCB9fQogIHRlbXBsYXRlOgogICAgc3BlYzoKICAgICAgYWZmaW5pdHk6CiAgICAgICAgbm9kZUFmZmluaXR5OgogICAgICAgICAgcmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbjoKICAgICAgICAgICAgbm9kZVNlbGVjdG9yVGVybXM6CiAgICAgICAgICAgIC0gbWF0Y2hFeHByZXNzaW9uczoKICAgICAgICAgICAgICAtIGtleTogazYKICAgICAgICAgICAgICAgIG9wZXJhdG9yOiBJbgogICAgICAgICAgICAgICAgdmFsdWVzOgogICAgICAgICAgICAgICAgLSAidHJ1ZSIKICAgICAgaW5pdENvbnRhaW5lcnM6CiAgICAgIC0gbmFtZToge3sgLk5hbWUgfX0taW5pdAogICAgICAgIHt7LSBpZiAuUmVnaXN0cnkgfX0KICAgICAgICBpbWFnZToge3sgLlJlZ2lzdHJ5IH19L3t7IC5Jbml0SW1hZ2UgfX0KICAgICAgICB7ey0gZWxzZSB9fQogICAgICAgIGltYWdlOiB7eyAuSW5pdEltYWdlIH19CiAgICAgICAge3stIGVuZCB9fQogICAgICAgIGltYWdlUHVsbFBvbGljeTogSWZOb3RQcmVzZW50CiAgICAgICAgY29tbWFuZDogCiAgICAgICAgICAtICIvYmluL3J1bm5lciIKICAgICAgICAgIC0gJ3t7IC5Kc24gfX0nCiAgICAgICAgdm9sdW1lTW91bnRzOgogICAgICAgIC0gbmFtZTogZGF0YS12b2x1bWUKICAgICAgICAgIG1vdW50UGF0aDogL2RhdGEKICAgICAgICB7ey0gaWYgLkNlcnRpZmljYXRlU2VjcmV0IH19CiAgICAgICAgLSBuYW1lOiB7eyAuQ2VydGlmaWNhdGVTZWNyZXQgfX0KICAgICAgICAgIG1vdW50UGF0aDogL2V0Yy9jZXJ0cwogICAgICAgIHt7LSBlbmQgfX0KICAgICAgICB7ey0gcmFuZ2UgJGNvbmZpZ21hcCA6PSAuRW52Q29uZmlnTWFwcyB9fQogICAgICAgIHt7LSBpZiBhbmQgJGNvbmZpZ21hcC5Nb3VudCAkY29uZmlnbWFwLlJlZmVyZW5jZSB9fQogICAgICAgIC0gbmFtZToge3sgJGNvbmZpZ21hcC5SZWZlcmVuY2UuTmFtZSB9fQogICAgICAgICAgbW91bnRQYXRoOiB7eyAkY29uZmlnbWFwLk1vdW50UGF0aCB9fQogICAgICAgIHt7LSBlbmQgfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgICAge3stIHJhbmdlICRzZWNyZXQgOj0gLkVudlNlY3JldHMgfX0KICAgICAgICB7ey0gaWYgYW5kICRzZWNyZXQuTW91bnQgJHNlY3JldC5SZWZlcmVuY2UgfX0KICAgICAgICAtIG5hbWU6IHt7ICRzZWNyZXQuUmVmZXJlbmNlLk5hbWUgfX0KICAgICAgICAgIG1vdW50UGF0aDoge3sgJHNlY3JldC5Nb3VudFBhdGggfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgICAge3stIGVuZCB9fQogICAgICBjb250YWluZXJzOgogICAgICAtIG5hbWU6ICJ7eyAuTmFtZSB9fSIKICAgICAgICB7ey0gaWYgLlJlZ2lzdHJ5IH19CiAgICAgICAgaW1hZ2U6IHt7IC5SZWdpc3RyeSB9fS97eyAuSW1hZ2UgfX0KICAgICAgICB7ey0gZWxzZSB9fQogICAgICAgIGltYWdlOiB7eyAuSW1hZ2UgfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgICAgaW1hZ2VQdWxsUG9saWN5OiBJZk5vdFByZXNlbnQKICAgICAgICBjb21tYW5kOiAKICAgICAgICAgIC0gIi9iaW4vcnVubmVyIgogICAgICAgICAgLSAne3sgLkpzbiB9fScKICAgICAgICB2b2x1bWVNb3VudHM6CiAgICAgICAgLSBuYW1lOiBkYXRhLXZvbHVtZQogICAgICAgICAgbW91bnRQYXRoOiAvZGF0YQogICAgICAgIHt7LSBpZiAuQ2VydGlmaWNhdGVTZWNyZXQgfX0KICAgICAgICAtIG5hbWU6IHt7IC5DZXJ0aWZpY2F0ZVNlY3JldCB9fQogICAgICAgICAgbW91bnRQYXRoOiAvZXRjL2NlcnRzCiAgICAgICAge3stIGVuZCB9fQogICAgICAgIHt7LSByYW5nZSAkY29uZmlnbWFwIDo9IC5FbnZDb25maWdNYXBzIH19CiAgICAgICAge3stIGlmIGFuZCAkY29uZmlnbWFwLk1vdW50ICRjb25maWdtYXAuUmVmZXJlbmNlIH19CiAgICAgICAgLSBuYW1lOiB7eyAkY29uZmlnbWFwLlJlZmVyZW5jZS5OYW1lIH19CiAgICAgICAgICBtb3VudFBhdGg6IHt7ICRjb25maWdtYXAuTW91bnRQYXRoIH19CiAgICAgICAge3stIGVuZCB9fQogICAgICAgIHt7LSBlbmQgfX0KICAgICAgICB7ey0gcmFuZ2UgJHNlY3JldCA6PSAuRW52U2VjcmV0cyB9fQogICAgICAgIHt7LSBpZiBhbmQgJHNlY3JldC5Nb3VudCAkc2VjcmV0LlJlZmVyZW5jZSB9fQogICAgICAgIC0gbmFtZToge3sgJHNlY3JldC5SZWZlcmVuY2UuTmFtZSB9fQogICAgICAgICAgbW91bnRQYXRoOiB7eyAkc2VjcmV0Lk1vdW50UGF0aCB9fQogICAgICAgIHt7LSBlbmQgfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgIHRvbGVyYXRpb25zOgogICAgICAtIGVmZmVjdDogTm9TY2hlZHVsZQogICAgICAgIGtleTogazYKICAgICAgICBvcGVyYXRvcjogRXF1YWwKICAgICAgICB2YWx1ZTogInRydWUiCiAgICAgIHZvbHVtZXM6CiAgICAgIC0gbmFtZTogZGF0YS12b2x1bWUKICAgICAgICBlbXB0eURpcjoge30KICAgICAge3stIGlmIC5DZXJ0aWZpY2F0ZVNlY3JldCB9fQogICAgICAtIG5hbWU6IHt7IC5DZXJ0aWZpY2F0ZVNlY3JldCB9fQogICAgICAgIHNlY3JldDoKICAgICAgICAgIHNlY3JldE5hbWU6IHt7IC5DZXJ0aWZpY2F0ZVNlY3JldCB9fQogICAgICB7ey0gZW5kIH19CiAgICAgIHt7LSByYW5nZSAkY29uZmlnbWFwIDo9IC5FbnZDb25maWdNYXBzIH19CiAgICAgIHt7LSBpZiBhbmQgJGNvbmZpZ21hcC5Nb3VudCAkY29uZmlnbWFwLlJlZmVyZW5jZSB9fQogICAgICAtIG5hbWU6IHt7ICRjb25maWdtYXAuUmVmZXJlbmNlLk5hbWUgfX0KICAgICAgICBjb25maWdtYXA6CiAgICAgICAgICBuYW1lOiB7eyAkY29uZmlnbWFwLlJlZmVyZW5jZS5OYW1lIH19CiAgICAgIHt7LSBlbmQgfX0KICAgICAge3stIGVuZCB9fQogICAgICB7ey0gcmFuZ2UgJHNlY3JldCA6PSAuRW52U2VjcmV0cyB9fQogICAgICB7ey0gaWYgYW5kICRzZWNyZXQuTW91bnQgJHNlY3JldC5SZWZlcmVuY2UgfX0KICAgICAgLSBuYW1lOiB7eyAkc2VjcmV0LlJlZmVyZW5jZS5OYW1lIH19CiAgICAgICAgc2VjcmV0OgogICAgICAgICAgc2VjcmV0TmFtZToge3sgJHNlY3JldC5SZWZlcmVuY2UuTmFtZSB9fQogICAgICB7ey0gZW5kIH19CiAgICAgIHt7LSBlbmQgfX0KICAgICAgcmVzdGFydFBvbGljeTogTmV2ZXIKICAgICAge3sgaWYgLlNlcnZpY2VBY2NvdW50TmFtZSB9fQogICAgICBzZXJ2aWNlQWNjb3VudE5hbWU6IHt7IC5TZXJ2aWNlQWNjb3VudE5hbWUgfX0KICAgICAge3sgZW5kIH19CiAgICAgIHt7LSBpZiBndCAobGVuIC5JbWFnZVB1bGxTZWNyZXRzKSAwIH19CiAgICAgIGltYWdlUHVsbFNlY3JldHM6CiAgICAgIHt7LSByYW5nZSAkc2VjcmV0IDo9IC5JbWFnZVB1bGxTZWNyZXRzIH19CiAgICAgIC0gbmFtZToge3sgJHNlY3JldCAtfX0KICAgICAge3stIGVuZCB9fQogICAgICB7ey0gZW5kIH19CiAgYmFja29mZkxpbWl0OiAwCiAgdHRsU2Vjb25kc0FmdGVyRmluaXNoZWQ6IDE4MAo=
        jobContainer: YXBpVmVyc2lvbjogYmF0Y2gvdjEKa2luZDogSm9iCm1ldGFkYXRhOgogIG5hbWU6ICJ7eyAuTmFtZSB9fSIKICBuYW1lc3BhY2U6IHt7IC5OYW1lc3BhY2UgfX0Kc3BlYzoKICB7ey0gaWYgZ3QgLkFjdGl2ZURlYWRsaW5lU2Vjb25kcyAwIH19CiAgYWN0aXZlRGVhZGxpbmVTZWNvbmRzOiB7eyAuQWN0aXZlRGVhZGxpbmVTZWNvbmRzIH19CiAge3stIGVuZCB9fQogIHRlbXBsYXRlOgogICAgc3BlYzoKICAgICAgYWZmaW5pdHk6CiAgICAgICAgbm9kZUFmZmluaXR5OgogICAgICAgICAgcmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbjoKICAgICAgICAgICAgbm9kZVNlbGVjdG9yVGVybXM6CiAgICAgICAgICAgIC0gbWF0Y2hFeHByZXNzaW9uczoKICAgICAgICAgICAgICAtIGtleTogazYKICAgICAgICAgICAgICAgIG9wZXJhdG9yOiBJbgogICAgICAgICAgICAgICAgdmFsdWVzOgogICAgICAgICAgICAgICAgLSAidHJ1ZSIKICAgICAge3stIGlmIG5lIC5Jbml0SW1hZ2UgIiIgfX0KICAgICAgaW5pdENvbnRhaW5lcnM6CiAgICAgIC0gbmFtZToge3sgLk5hbWUgfX0taW5pdAogICAgICAgIHt7LSBpZiAuUmVnaXN0cnkgfX0KICAgICAgICBpbWFnZToge3sgLlJlZ2lzdHJ5IH19L3t7IC5Jbml0SW1hZ2UgfX0KICAgICAgICB7ey0gZWxzZSB9fQogICAgICAgIGltYWdlOiB7eyAuSW5pdEltYWdlIH19CiAgICAgICAge3stIGVuZCB9fQogICAgICAgIGltYWdlUHVsbFBvbGljeTogSWZOb3RQcmVzZW50CiAgICAgICAgY29tbWFuZDoKICAgICAgICAgIC0gIi9iaW4vcnVubmVyIgogICAgICAgICAgLSAne3sgLkpzbiB9fScKICAgICAgICB2b2x1bWVNb3VudHM6CiAgICAgICAgLSBuYW1lOiBkYXRhLXZvbHVtZQogICAgICAgICAgbW91bnRQYXRoOiAvZGF0YQogICAgICAgIHt7LSBpZiAuQ2VydGlmaWNhdGVTZWNyZXQgfX0KICAgICAgICAtIG5hbWU6IHt7IC5DZXJ0aWZpY2F0ZVNlY3JldCB9fQogICAgICAgICAgbW91bnRQYXRoOiAvZXRjL2NlcnRzCiAgICAgICAge3stIGVuZCB9fQogICAgICAgIHt7LSBpZiAuQXJ0aWZhY3RSZXF1ZXN0IH19CiAgICAgICAgLSBuYW1lOiBhcnRpZmFjdC12b2x1bWUKICAgICAgICAgIG1vdW50UGF0aDoge3sgLkFydGlmYWN0UmVxdWVzdC5Wb2x1bWVNb3VudFBhdGggfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgICAge3stIHJhbmdlICRjb25maWdtYXAgOj0gLkVudkNvbmZpZ01hcHMgfX0KICAgICAgICB7ey0gaWYgYW5kICRjb25maWdtYXAuTW91bnQgJGNvbmZpZ21hcC5SZWZlcmVuY2UgfX0KICAgICAgICAtIG5hbWU6IHt7ICRjb25maWdtYXAuUmVmZXJlbmNlLk5hbWUgfX0KICAgICAgICAgIG1vdW50UGF0aDoge3sgJGNvbmZpZ21hcC5Nb3VudFBhdGggfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgICAge3stIGVuZCB9fQogICAgICAgIHt7LSByYW5nZSAkc2VjcmV0IDo9IC5FbnZTZWNyZXRzIH19CiAgICAgICAge3stIGlmIGFuZCAkc2VjcmV0Lk1vdW50ICRzZWNyZXQuUmVmZXJlbmNlIH19CiAgICAgICAgLSBuYW1lOiB7eyAkc2VjcmV0LlJlZmVyZW5jZS5OYW1lIH19CiAgICAgICAgICBtb3VudFBhdGg6IHt7ICRzZWNyZXQuTW91bnRQYXRoIH19CiAgICAgICAge3stIGVuZCB9fQogICAgICAgIHt7LSBlbmQgfX0KICAgICAge3stIGVuZCB9fQogICAgICBjb250YWluZXJzOgogICAgICAtIG5hbWU6ICJ7eyAuTmFtZSB9fSIKICAgICAgICB7ey0gaWYgLlJlZ2lzdHJ5IH19CiAgICAgICAgaW1hZ2U6IHt7IC5SZWdpc3RyeSB9fS97eyAuSW1hZ2UgfX0KICAgICAgICB7ey0gZWxzZSB9fQogICAgICAgIGltYWdlOiB7eyAuSW1hZ2UgfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgICAgaW1hZ2VQdWxsUG9saWN5OiBJZk5vdFByZXNlbnQKICAgICAgICB7ey0gaWYgZ3QgKGxlbiAuQ29tbWFuZCkgMCB9fQogICAgICAgIGNvbW1hbmQ6CiAgICAgICAge3stIHJhbmdlICRjbWQgOj0gLkNvbW1hbmQgfX0KICAgICAgICAtIHt7ICRjbWQgLX19CiAgICAgICAge3stIGVuZCB9fQogICAgICAgIHt7LSBlbmQgLX19CiAgICAgICAge3stIGlmIGd0IChsZW4gLkFyZ3MpIDAgfX0KICAgICAgICBhcmdzOgogICAgICAgIHt7LSByYW5nZSAkYXJnIDo9IC5BcmdzIH19CiAgICAgICAgLSB7eyAkYXJnIC19fQogICAgICAgIHt7LSBlbmQgfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgICAge3stIGlmIC5Xb3JraW5nRGlyIH19CiAgICAgICAgd29ya2luZ0Rpcjoge3sgLldvcmtpbmdEaXIgfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgICAgdm9sdW1lTW91bnRzOgogICAgICAgIC0gbmFtZTogZGF0YS12b2x1bWUKICAgICAgICAgIG1vdW50UGF0aDogL2RhdGEKICAgICAgICB7ey0gaWYgLkNlcnRpZmljYXRlU2VjcmV0IH19CiAgICAgICAgLSBuYW1lOiB7eyAuQ2VydGlmaWNhdGVTZWNyZXQgfX0KICAgICAgICAgIG1vdW50UGF0aDogL2V0Yy9jZXJ0cwogICAgICAgIHt7LSBlbmQgfX0KICAgICAgICB7ey0gaWYgLkFydGlmYWN0UmVxdWVzdCB9fQogICAgICAgIC0gbmFtZTogYXJ0aWZhY3Qtdm9sdW1lCiAgICAgICAgICBtb3VudFBhdGg6IHt7IC5BcnRpZmFjdFJlcXVlc3QuVm9sdW1lTW91bnRQYXRoIH19CiAgICAgICAge3stIGVuZCB9fQogICAgICAgIHt7LSByYW5nZSAkY29uZmlnbWFwIDo9IC5FbnZDb25maWdNYXBzIH19CiAgICAgICAge3stIGlmIGFuZCAkY29uZmlnbWFwLk1vdW50ICRjb25maWdtYXAuUmVmZXJlbmNlIH19CiAgICAgICAgLSBuYW1lOiB7eyAkY29uZmlnbWFwLlJlZmVyZW5jZS5OYW1lIH19CiAgICAgICAgICBtb3VudFBhdGg6IHt7ICRjb25maWdtYXAuTW91bnRQYXRoIH19CiAgICAgICAge3stIGVuZCB9fQogICAgICAgIHt7LSBlbmQgfX0KICAgICAgICB7ey0gcmFuZ2UgJHNlY3JldCA6PSAuRW52U2VjcmV0cyB9fQogICAgICAgIHt7LSBpZiBhbmQgJHNlY3JldC5Nb3VudCAkc2VjcmV0LlJlZmVyZW5jZSB9fQogICAgICAgIC0gbmFtZToge3sgJHNlY3JldC5SZWZlcmVuY2UuTmFtZSB9fQogICAgICAgICAgbW91bnRQYXRoOiB7eyAkc2VjcmV0Lk1vdW50UGF0aCB9fQogICAgICAgIHt7LSBlbmQgfX0KICAgICAgICB7ey0gZW5kIH19CiAgICAgIHRvbGVyYXRpb25zOgogICAgICAtIGVmZmVjdDogTm9TY2hlZHVsZQogICAgICAgIGtleTogazYKICAgICAgICBvcGVyYXRvcjogRXF1YWwKICAgICAgICB2YWx1ZTogInRydWUiCiAgICAgIHZvbHVtZXM6CiAgICAgIC0gbmFtZTogZGF0YS12b2x1bWUKICAgICAgICBlbXB0eURpcjoge30KICAgICAge3stIGlmIC5DZXJ0aWZpY2F0ZVNlY3JldCB9fQogICAgICAtIG5hbWU6IHt7IC5DZXJ0aWZpY2F0ZVNlY3JldCB9fQogICAgICAgIHNlY3JldDoKICAgICAgICAgIHNlY3JldE5hbWU6IHt7IC5DZXJ0aWZpY2F0ZVNlY3JldCB9fQogICAgICB7ey0gZW5kIH19CiAgICAgIHt7LSBpZiAuQXJ0aWZhY3RSZXF1ZXN0IH19CiAgICAgIC0gbmFtZTogYXJ0aWZhY3Qtdm9sdW1lCiAgICAgICAgcGVyc2lzdGVudFZvbHVtZUNsYWltOgogICAgICAgICAgY2xhaW1OYW1lOiB7eyAuTmFtZSB9fS1wdmMKICAgICAge3stIGVuZCB9fQogICAgICB7ey0gcmFuZ2UgJGNvbmZpZ21hcCA6PSAuRW52Q29uZmlnTWFwcyB9fQogICAgICB7ey0gaWYgYW5kICRjb25maWdtYXAuTW91bnQgJGNvbmZpZ21hcC5SZWZlcmVuY2UgfX0KICAgICAgLSBuYW1lOiB7eyAkY29uZmlnbWFwLlJlZmVyZW5jZS5OYW1lIH19CiAgICAgICAgY29uZmlnbWFwOgogICAgICAgICAgbmFtZToge3sgJGNvbmZpZ21hcC5SZWZlcmVuY2UuTmFtZSB9fQogICAgICB7ey0gZW5kIH19CiAgICAgIHt7LSBlbmQgfX0KICAgICAge3stIHJhbmdlICRzZWNyZXQgOj0gLkVudlNlY3JldHMgfX0KICAgICAge3stIGlmIGFuZCAkc2VjcmV0Lk1vdW50ICRzZWNyZXQuUmVmZXJlbmNlIH19CiAgICAgIC0gbmFtZToge3sgJHNlY3JldC5SZWZlcmVuY2UuTmFtZSB9fQogICAgICAgIHNlY3JldDoKICAgICAgICAgIHNlY3JldE5hbWU6IHt7ICRzZWNyZXQuUmVmZXJlbmNlLk5hbWUgfX0KICAgICAge3stIGVuZCB9fQogICAgICB7ey0gZW5kIH19CiAgICAgIHJlc3RhcnRQb2xpY3k6IE5ldmVyCiAgICAgIHt7LSBpZiAuU2VydmljZUFjY291bnROYW1lIH19CiAgICAgIHNlcnZpY2VBY2NvdW50TmFtZToge3suU2VydmljZUFjY291bnROYW1lIH19CiAgICAgIHt7LSBlbmQgfX0KICAgICAge3stIGlmIGd0IChsZW4gLkltYWdlUHVsbFNlY3JldHMpIDAgfX0KICAgICAgaW1hZ2VQdWxsU2VjcmV0czoKICAgICAge3stIHJhbmdlICRzZWNyZXQgOj0gLkltYWdlUHVsbFNlY3JldHMgfX0KICAgICAgLSBuYW1lOiB7eyAkc2VjcmV0IC19fQogICAgICB7ey0gZW5kIH19CiAgICAgIHt7LSBlbmQgfX0KICBiYWNrb2ZmTGltaXQ6IDAKICB0dGxTZWNvbmRzQWZ0ZXJGaW5pc2hlZDoge3sgLkRlbGF5U2Vjb25kcyB9fQo=
      uiIngress:
        enabled: false
    testkube-dashboard:
      resources:
        limits:
          cpu: 200m
          memory: 256Mi
        requests:
          cpu: 100m
          memory: 128Mi
    testkube-operator:
      resources:
        limits:
          cpu: 100m
          memory: 128Mi
        requests:
          cpu: 50m
          memory: 64Mi
